name: first-pipeline
application: crossplanedemo
serviceAccount: keeldemo-service-account
artifacts:
- name: nabuskey/led-demo
  type: docker
  reference: my-docker-artifact
  tagVersionStrategy: increasing-tag
environments:
  - name: dev
    locations:
      account: deploy-steven
      regions: []
    resources:
    - kind: k8s/resource@v1
      spec:
        metadata:
         application: crossplane-test
        template:
          apiVersion: v1
          kind: Service
          metadata:
            name: crossplane-test
            namespace: dev-env
          spec:
            ports:
            - port: 8080
              protocol: TCP
              targetPort: 4000
            type: ClusterIP
            selector:
             app: crossplane-test
    - kind: k8s/resource@v1
      spec:
        metadata:
          application: crossplane-test
        template:
          apiVersion: s3.aws.crossplane.io/v1beta1
          kind: Bucket
          metadata:
            name: borrelli-spinnaker-dev-bucket
          spec:
            deletionPolicy: Delete
            forProvider:
              acl: private
              locationConstraint: us-west-2
              accelerateConfiguration:
                status: Enabled
              versioningConfiguration:
                status: Enabled
              tagging:
                tagSet:
                  - key: owner
                    value: borrelli-spinnaker-demo
                  - key: billing-id
                    value: frontend
    - kind: k8s/resource@v1
      spec:
        metadata:
          application: crossplane-test
        template:
          apiversion: aws.platformref.crossplane.io/v1alpha1
          kind: CompositeNetwork
          metadata:
            name: dev-network
          spec:
            metadata:
              name: dev-network
            spec:
              name: spinnaker-dev-network
              clusterRef:
                name: spinnaker-demo
  - name: prod
    locations:
      account: deploy-steven
      regions: []
    resources:
    - kind: k8s/resource@v1
      spec:
        metadata:
          application: crossplane-test
        template:
          apiVersion: s3.aws.crossplane.io/v1beta1
          kind: Bucket
          metadata:
            name: borrelli-spinnaker-demo-prod
          spec:
            deletionPolicy: Delete
            forProvider:
              acl: private
              locationConstraint: us-west-2
              accelerateConfiguration:
                status: Enabled
              versioningConfiguration:
                status: Enabled
              tagging:
                tagSet:
                  - key: owner
                    value: borrelli-spinnaker-demo
                  - key: billing-id
                    value: frontend
